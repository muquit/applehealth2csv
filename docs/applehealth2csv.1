.\" Automatically generated by Pandoc 2.10.1
.\"
.TH "" "" "" "" ""
.hy
.SS Page Contents
.IP \[bu] 2
Introduction
.IP \[bu] 2
Exporting health data from iPhone
.IP \[bu] 2
Synopsis
.IP \[bu] 2
How to use
.IP \[bu] 2
Version
.IP \[bu] 2
Supported platforms
.IP \[bu] 2
Downloading and Installing
.RS 2
.IP \[bu] 2
Installing using Homebrew on Mac
.RS 2
.IP \[bu] 2
Install
.IP \[bu] 2
Uninstall
.RE
.IP \[bu] 2
Installing the debian package on Ubuntu or Debian or Raspberry pi
.RS 2
.IP \[bu] 2
Inspect the package content
.IP \[bu] 2
Install
.IP \[bu] 2
Uninstall
.RE
.IP \[bu] 2
Install the RPM package
.RS 2
.IP \[bu] 2
Inspect the package content
.IP \[bu] 2
Install/Upgrade
.IP \[bu] 2
Uninstall
.RE
.IP \[bu] 2
Install from archive
.RS 2
.IP \[bu] 2
Inspect the content
.IP \[bu] 2
Install Linux
.IP \[bu] 2
Install Windows
.RE
.RE
.IP \[bu] 2
Compiling
.IP \[bu] 2
Sample output
.RS 2
.IP \[bu] 2
StepCount.csv
.IP \[bu] 2
StepCont.json - wihout header
.IP \[bu] 2
StepCont.json - with header
.RE
.IP \[bu] 2
Data analysis
.IP \[bu] 2
License (is MIT)
.SH Introduction
.PP
\f[C]applehealth2csv\f[R] is a multi platform command line tool to
convert Apple Watch health data to CSV or JSON files.
This program uses the go module
applehealth (https://github.com/AlekSi/applehealth) for parsing the
health data.
.PP
Suggestions, bug reports, pull requests are always welcome.
.SH Exporting health data from iPhone
.IP "1." 3
Launch the \f[I]Health App\f[R] on iPhone.
.IP "2." 3
Tap on the profile photo or icon at the top right corner.
.IP "3." 3
Tap \f[B]Export All Health Data\f[R] at the bottom of the screen.
.PP
Health data will be saved to \f[C]export.zip\f[R] file.
Use appropriate techniques to transfer the file to your machine.
If \f[C]export.zip\f[R] is unzipped, there will be \f[C]export.xml\f[R]
among other files.
This program can take the zip file or the xml file as input.
The zip file is significantly smaller than the xml file.
For example, my \f[C]export.zip\f[R] is 72 MB for a year and the
\f[C]export.xml\f[R] is 644 MB.
Therefore, don\[cq]t bother to unzip it unless you need XML or other
files.
.SH Synopsis
.IP
.nf
\f[C]
applehealth2csv v1.0.1
https://www.muquit.com/
A program to convert Apple Watch health data to CSV or JSON files

To export health data:
  1. Launch Health App on iPhone.
  2. Tap on the profile photo or icon at the top right corner.
  3. Tap \[dq]Export All Health Data\[dq] at the bottom of the screen.

 Health data will be saved to export.zip file. Use appropriate technique
 to transfer the file to your machine. If export.zip is unzipped,
 there will be export.xml among other files. This program can take
 the zip file or the xml file as input.

  -debug
        Print debug messages (default true)
  -dir string
        Directory for creating CSV/JSON files (default \[dq]/path/working/directory\[dq])
  -file string
        Path of export.zip or export.xml file (required)
  -header
        Print JSON headers at first array (default true)
  -json
        Print Output in JSON, default is CSV

Example:
 applehealth2csv -file export.zip -dir ./csv
 applehealth2csv -file export.xml -dir ./csv -debug=false
 applehealth2csv -json -file export.zip -dir ./json_h
 applehealth2csv -json -header=false -file export.zip -dir ./json_nh
\f[R]
.fi
.SH How to use
.IP
.nf
\f[C]
$ /bin/ls -lh
-rw-r--r-- 1 muquit  staff    72M Dec 31 18:16 export.zip
-rw-r--r-- 1 muquit  staff   644M Dec 31 19:30 export.xml
\f[R]
.fi
.PP
The \f[C]export.zip\f[R] contains data for 1 year working out everyday.
Notice the XML file is order of magnitude larger than the zip file.
Therefore, don\[cq]t bother to unzip the file unless you need the XML
file for some reason.
.IP
.nf
\f[C]
$ ./applehealth2csv -file ./export.zip -dir ./csv 
2021/01/10 14:42:16 Make directory: ./csv
2021/01/10 14:42:16 CSV files will be written to directory: ./csv
2021/01/10 14:42:16 applehealth2csv v1.0.1 Creating CSV files ....
2021/01/10 14:42:16 Creating: ./csv/Height.csv
2021/01/10 14:42:16 Creating: ./csv/BodyMass.csv
2021/01/10 14:42:16 Creating: ./csv/HeartRate.csv
2021/01/10 14:42:25 Creating: ./csv/StepCount.csv
2021/01/10 14:42:34 Creating: ./csv/DistanceWalkingRunning.csv
2021/01/10 14:42:42 Creating: ./csv/BasalEnergyBurned.csv
2021/01/10 14:42:50 Creating: ./csv/ActiveEnergyBurned.csv
2021/01/10 14:43:09 Creating: ./csv/FlightsClimbed.csv
2021/01/10 14:43:10 Creating: ./csv/AppleExerciseTime.csv
2021/01/10 14:43:10 Creating: ./csv/DistanceCycling.csv
2021/01/10 14:43:10 Creating: ./csv/RestingHeartRate.csv
2021/01/10 14:43:10 Creating: ./csv/VO2Max.csv
2021/01/10 14:43:10 Creating: ./csv/WalkingHeartRateAverage.csv
2021/01/10 14:43:10 Creating: ./csv/EnvironmentalAudioExposure.csv
2021/01/10 14:43:11 Creating: ./csv/HeadphoneAudioExposure.csv
2021/01/10 14:43:11 Creating: ./csv/WalkingDoubleSupportPercentage.csv
2021/01/10 14:43:11 Creating: ./csv/SixMinuteWalkTestDistance.csv
2021/01/10 14:43:11 Creating: ./csv/AppleStandTime.csv
2021/01/10 14:43:11 Creating: ./csv/WalkingSpeed.csv
2021/01/10 14:43:11 Creating: ./csv/WalkingStepLength.csv
2021/01/10 14:43:11 Creating: ./csv/WalkingAsymmetryPercentage.csv
2021/01/10 14:43:11 Creating: ./csv/StairAscentSpeed.csv
2021/01/10 14:43:11 Creating: ./csv/StairDescentSpeed.csv
2021/01/10 14:43:11 Creating: ./csv/AppleStandHour.csv
2021/01/10 14:43:12 Creating: ./csv/MindfulSession.csv
2021/01/10 14:43:12 Creating: ./csv/HeartRateVariabilitySDNN.csv
2021/01/10 14:43:13 Created 26 CSV files in ./csv
2021/01/10 14:43:13 applehealth2csv took 56.315513996s to write 1658777 Records
\f[R]
.fi
.PP
Please look at the section Sample output for sample output
.SH Version
.PP
The current version of \f[C]applehealth2csv\f[R] is 1.0.1.
.PP
Please look at ChangeLog for what has changed in the current version.
.SH Supported platforms
.PP
Pre-compiled \f[C]applehealth2csv\f[R] binaries are available for the
following platforms:
.IP \[bu] 2
Windows - 64 bit (zip)
.IP \[bu] 2
Linux - 64 bit (tgz, debian and rpm)
.IP \[bu] 2
MacOS - 64 bit (tgz, Homebrew)
.IP \[bu] 2
Raspberry pi - 32 bit (debian, rpm)
.SH Downloading and Installing
.PP
You can download pre-compiled binaries from the
releases (https://github.com/muquit/applehealth2csv/releases) page.
.PP
Please add an issue (https://github.com/muquit/applehealth2csv/issues)
if you would need binaries for any other platforms.
.PP
Before installing, please make sure to verify the checksum.
.SS Installing using Homebrew on Mac
.PP
You will need to install Homebrew (https://brew.sh/) first.
.SS Install
.PP
First install the custom tap.
.IP
.nf
\f[C]
    $ brew tap muquit/applehealth2csv https://github.com/muquit/applehealth2csv.git
    $ brew install applehealth2csv
\f[R]
.fi
.SS Uninstall
.IP
.nf
\f[C]
    $ brew uninstall applehealth2csv
\f[R]
.fi
.SS Installing the debian package on Ubuntu or Debian or Raspberry pi
.SS Inspect the package content
.IP
.nf
\f[C]
    $ dpkg -c applehealth2csv_linux_64-bit.deb
\f[R]
.fi
.SS Install
.IP
.nf
\f[C]
    $ sudo dpkg -i applehealth2csv_linux_64-bit.deb 
    $ applehealth2csv -h
\f[R]
.fi
.SS Uninstall
.IP
.nf
\f[C]
    $ sudo dpkg -r applehealth2csv
\f[R]
.fi
.SS Install the RPM package
.SS Inspect the package content
.IP
.nf
\f[C]
    $ rpm -qlp applehealth2csv_linux_64-bit.rpm
\f[R]
.fi
.SS Install/Upgrade
.IP
.nf
\f[C]
    # rpm -Uvh applehealth2csv_linux_64-bit.rpm
    # applehealth2csv -h
\f[R]
.fi
.SS Uninstall
.IP
.nf
\f[C]
    # rpm -ev applehealth2csv
\f[R]
.fi
.SS Install from archive
.SS Inspect the content
.IP
.nf
\f[C]
    $ tar -tvf applehealth2csv_x.x.x_linux_64-bit.tar.gz
\f[R]
.fi
.IP
.nf
\f[C]
    $ unzip -l applehealth2csv_x.x.x_windows_64-bit.zip
\f[R]
.fi
.SS Install Linux
.IP
.nf
\f[C]
    $ tar -xf applehealth2csv_x.x.x_linux_64-bit.tar.gz
    $ sudo cp applehealth2csv-dir/applehealth2csv /usr/local/bin
    $ sudo cp applehealth2csv-dir/doc/applehealth2csv.1 /usr/local/share/man/man1
\f[R]
.fi
.SS Install Windows
.PP
After downloading the latest .zip file (e.g.,
applehealth2csv_x.x.x_windows_64-bit.zip), unzip it, and copy
\f[C]applehealth2csv-dir\[rs]applehealth2csv.exe\f[R] somewhere in your
PATH or run it from the directory.
.SH Compiling
.PP
Compiling from scratch requires the Go programming language
toolchain (https://golang.org/dl/) and git.
Note: \f[I]applehealth2csv\f[R] uses go
modules (https://github.com/golang/go/wiki/Modules) for dependency
management.
.PP
To generate native binary, type
.IP
.nf
\f[C]
go build
\f[R]
.fi
.PP
Please look at \f[C]Makefile\f[R] for cross-compiling for other
platforms.
.SH Sample output
.SS StepCount.csv
.IP
.nf
\f[C]
sourceName,sourceVersion,device,Type,unit,creationDate,startDate,endDate,value
\[dq]iPhone\[dq],\[dq]14.3\[dq],\[dq]<<HKDevice: 0x2834fdb80>, name:iPhone, manufacturer:Apple Inc., model:iPhone, hardware:iPhone11,8, software:14.3>\[dq],\[dq]HKQuantityTypeIdentifierStepCount\[dq],\[dq]count\[dq],\[dq]2020-12-31 17:19:06 -0500\[dq],\[dq]2020-12-31 17:05:33 -0500\[dq],\[dq]2020-12-31 17:08:26 -0500\[dq],\[dq]123\[dq]
\[dq]Muhammad\[cq]s Apple\ Watch\[dq],\[dq]7.2\[dq],\[dq]<<HKDevice: 0x2834fee90>, name:Apple Watch, manufacturer:Apple Inc., model:Watch, hardware:Watch5,1, software:7.2>\[dq],\[dq]HKQuantityTypeIdentifierStepCount\[dq],\[dq]count\[dq],\[dq]2020-12-31 17:24:23 -0500\[dq],\[dq]2020-12-31 17:19:28 -0500\[dq],\[dq]2020-12-31 17:20:24 -0500\[dq],\[dq]123\[dq]
\[dq]Muhammad\[cq]s Apple\ Watch\[dq],\[dq]7.2\[dq],\[dq]<<HKDevice: 0x2834fee90>, name:Apple Watch, manufacturer:Apple Inc., model:Watch, hardware:Watch5,1, software:7.2>\[dq],\[dq]HKQuantityTypeIdentifierStepCount\[dq],\[dq]count\[dq],\[dq]2020-12-31 17:24:23 -0500\[dq],\[dq]2020-12-31 17:20:27 -0500\[dq],\[dq]2020-12-31 17:21:23 -0500\[dq],\[dq]123\[dq]
\[dq]Muhammad\[cq]s Apple\ Watch\[dq],\[dq]7.2\[dq],\[dq]<<HKDevice: 0x2834fee90>, name:Apple Watch, manufacturer:Apple Inc., model:Watch, hardware:Watch5,1, software:7.2>\[dq],\[dq]HKQuantityTypeIdentifierStepCount\[dq],\[dq]count\[dq],\[dq]2020-12-31 17:28:27 -0500\[dq],\[dq]2020-12-31 17:26:28 -0500\[dq],\[dq]2020-12-31 17:26:34 -0500\[dq],\[dq]123\[dq]
\f[R]
.fi
.SS StepCont.json - wihout header
.IP
.nf
\f[C]
[
    {
       \[dq]sourceName\[dq]: \[dq]iPhone\[dq],
       \[dq]sourceVersion\[dq]: \[dq]14.3\[dq],
       \[dq]device\[dq]: \[dq]<<HKDevice: 0x2834fdb80>, name:iPhone, manufacturer:Apple Inc., model:iPhone, hardware:iPhone11,8, software:14.3>\[dq],
       \[dq]type\[dq]:\[dq]HKQuantityTypeIdentifierStepCount\[dq],
       \[dq]unit\[dq]: \[dq]count\[dq],
       \[dq]creationDate\[dq]: \[dq]2020-12-31 17:19:06 -0500\[dq],
       \[dq]startDate\[dq]: \[dq]2020-12-31 17:05:33 -0500\[dq],
       \[dq]endDate\[dq]: \[dq]2020-12-31 17:08:26 -0500\[dq],
       \[dq]value\[dq]: \[dq]123\[dq]
    },
    {
       \[dq]sourceName\[dq]: \[dq]Muhammad\[cq]s Apple\ Watch\[dq],
       \[dq]sourceVersion\[dq]: \[dq]7.2\[dq],
       \[dq]device\[dq]: \[dq]<<HKDevice: 0x2834fee90>, name:Apple Watch, manufacturer:Apple Inc., model:Watch, hardware:Watch5,1, software:7.2>\[dq],
       \[dq]type\[dq]:\[dq]HKQuantityTypeIdentifierStepCount\[dq],
       \[dq]unit\[dq]: \[dq]count\[dq],
       \[dq]creationDate\[dq]: \[dq]2020-12-31 17:24:23 -0500\[dq],
       \[dq]startDate\[dq]: \[dq]2020-12-31 17:19:28 -0500\[dq],
       \[dq]endDate\[dq]: \[dq]2020-12-31 17:20:24 -0500\[dq],
       \[dq]value\[dq]: \[dq]123\[dq]
    },
    {
       \[dq]sourceName\[dq]: \[dq]Muhammad\[cq]s Apple\ Watch\[dq],
       \[dq]sourceVersion\[dq]: \[dq]7.2\[dq],
       \[dq]device\[dq]: \[dq]<<HKDevice: 0x2834fee90>, name:Apple Watch, manufacturer:Apple Inc., model:Watch, hardware:Watch5,1, software:7.2>\[dq],
       \[dq]type\[dq]:\[dq]HKQuantityTypeIdentifierStepCount\[dq],
       \[dq]unit\[dq]: \[dq]count\[dq],
       \[dq]creationDate\[dq]: \[dq]2020-12-31 17:24:23 -0500\[dq],
       \[dq]startDate\[dq]: \[dq]2020-12-31 17:20:27 -0500\[dq],
       \[dq]endDate\[dq]: \[dq]2020-12-31 17:21:23 -0500\[dq],
       \[dq]value\[dq]: \[dq]123\[dq]
    },
    {
       \[dq]sourceName\[dq]: \[dq]Muhammad\[cq]s Apple\ Watch\[dq],
       \[dq]sourceVersion\[dq]: \[dq]7.2\[dq],
       \[dq]device\[dq]: \[dq]<<HKDevice: 0x2834fee90>, name:Apple Watch, manufacturer:Apple Inc., model:Watch, hardware:Watch5,1, software:7.2>\[dq],
       \[dq]type\[dq]:\[dq]HKQuantityTypeIdentifierStepCount\[dq],
       \[dq]unit\[dq]: \[dq]count\[dq],
       \[dq]creationDate\[dq]: \[dq]2020-12-31 17:28:27 -0500\[dq],
       \[dq]startDate\[dq]: \[dq]2020-12-31 17:26:28 -0500\[dq],
       \[dq]endDate\[dq]: \[dq]2020-12-31 17:26:34 -0500\[dq],
       \[dq]value\[dq]: \[dq]123\[dq]
    }
]
\f[R]
.fi
.SS StepCont.json - with header
.IP
.nf
\f[C]
[
    [
       \[dq]sourceName\[dq],
       \[dq]sourceVersion\[dq],
       \[dq]device\[dq],
       \[dq]Type\[dq],
       \[dq]unit\[dq],
       \[dq]creationDate\[dq],
       \[dq]startDate\[dq],
       \[dq]endDate\[dq],
       \[dq]value\[dq]
    ],
    [
       \[dq]iPhone\[dq],
       \[dq]14.3\[dq],
       \[dq]<<HKDevice: 0x2834fdb80>, name:iPhone, manufacturer:Apple Inc., model:iPhone, hardware:iPhone11,8, software:14.3>\[dq],
       \[dq]HKQuantityTypeIdentifierStepCount\[dq],
       \[dq]count\[dq],
       \[dq]2020-12-31 17:19:06 -0500\[dq],
       \[dq]2020-12-31 17:05:33 -0500\[dq],
       \[dq]2020-12-31 17:08:26 -0500\[dq],
       \[dq]123\[dq]
    ],
    [
       \[dq]Muhammad\[cq]s Apple\ Watch\[dq],
       \[dq]7.2\[dq],
       \[dq]<<HKDevice: 0x2834fee90>, name:Apple Watch, manufacturer:Apple Inc., model:Watch, hardware:Watch5,1, software:7.2>\[dq],
       \[dq]HKQuantityTypeIdentifierStepCount\[dq],
       \[dq]count\[dq],
       \[dq]2020-12-31 17:24:23 -0500\[dq],
       \[dq]2020-12-31 17:19:28 -0500\[dq],
       \[dq]2020-12-31 17:20:24 -0500\[dq],
       \[dq]123\[dq]
    ],
    [
       \[dq]Muhammad\[cq]s Apple\ Watch\[dq],
       \[dq]7.2\[dq],
       \[dq]<<HKDevice: 0x2834fee90>, name:Apple Watch, manufacturer:Apple Inc., model:Watch, hardware:Watch5,1, software:7.2>\[dq],
       \[dq]HKQuantityTypeIdentifierStepCount\[dq],
       \[dq]count\[dq],
       \[dq]2020-12-31 17:24:23 -0500\[dq],
       \[dq]2020-12-31 17:20:27 -0500\[dq],
       \[dq]2020-12-31 17:21:23 -0500\[dq],
       \[dq]123\[dq]
    ],
    [
       \[dq]Muhammad\[cq]s Apple\ Watch\[dq],
       \[dq]7.2\[dq],
       \[dq]<<HKDevice: 0x2834fee90>, name:Apple Watch, manufacturer:Apple Inc., model:Watch, hardware:Watch5,1, software:7.2>\[dq],
       \[dq]HKQuantityTypeIdentifierStepCount\[dq],
       \[dq]count\[dq],
       \[dq]2020-12-31 17:28:27 -0500\[dq],
       \[dq]2020-12-31 17:26:28 -0500\[dq],
       \[dq]2020-12-31 17:26:34 -0500\[dq],
       \[dq]123\[dq]
    ]
]
\f[R]
.fi
.SH Data analysis
.PP
The CSV files can be used to perform data analysis in many ways, For
example
.IP \[bu] 2
Load to a spreadsheet like Microsoft Excel
.IP \[bu] 2
Load to Elasticsearch using Filebeat and visualize with Kibana
.IP \[bu] 2
Use python etc.
.PP
This blog post does data analysis with python.
http://www.markwk.com/data-analysis-for-apple-health.html in jupyter
notebook.
.IP \[bu] 2
Delete the first cell as we are not using python to convert health data
to csv.
.IP \[bu] 2
Replace the timezone with your one in the following line:
.IP
.nf
\f[C]
convert_tz = lambda x: x.to_pydatetime().replace(tzinfo=pytz.utc).astimezone(pytz.timezone(\[aq]Asia/Shanghai\[aq]))
\f[R]
.fi
.PP
For example for US East coast:
.IP
.nf
\f[C]
convert_tz = lambda x: x.to_pydatetime().replace(tzinfo=pytz.utc).astimezone(pytz.timezone(\[aq]America/new_york\[aq]))
\f[R]
.fi
.PP
All the steps worked successfully for me.
.SH License (is MIT)
.PP
The MIT License (MIT)
.PP
Copyright \[co] 2021 muquit\[at]muquit.com
.PP
Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
\[lq]Software\[rq]), to deal in the Software without restriction,
including without limitation the rights to use, copy, modify, merge,
publish, distribute, sublicense, and/or sell copies of the Software, and
to permit persons to whom the Software is furnished to do so, subject to
the following conditions:
.PP
The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.
.PP
THE SOFTWARE IS PROVIDED \[lq]AS IS\[rq], WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
.PP
   *   *   *   *   *
.IP \[bu] 2
This file is assembled from docs/*.md with
markdown_helper (https://github.com/BurdetteLamar/markdown_helper)
.IP \[bu] 2
The software is released with goreleaser (https://goreleaser.com/)
